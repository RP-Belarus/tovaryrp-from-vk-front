(this["webpackJsonptovaryrp-from-vk-front"]=this["webpackJsonptovaryrp-from-vk-front"]||[]).push([[0],{64:function(e,t,l){e.exports=l(88)},69:function(e,t,l){},75:function(e,t,l){},78:function(e,t,l){},79:function(e,t,l){},80:function(e,t,l){},87:function(e,t,l){},88:function(e,t,l){"use strict";l.r(t);var n=l(0),a=l.n(n),r=l(22),c=l.n(r),o=(l(69),l(28)),s=l(29),u=l(32),i=l(30),m=l(39),d=l(6),p=(l(70),l(97)),E=l(98),f=l(99),h=l(94),v=l(95),k=(l(71),l(72),l(74),l(93)),S=l(90),_=l(91),L=l(92),C=l(8),g=l.n(C),b=l(57),y=l.n(b),j=l(58),I=l.n(j),O=(l(75),function(e){var t=g.a.icon({iconUrl:y.a,shadowUrl:I.a,iconAnchor:[13,41],popupAnchor:[1,-33]});g.a.Marker.prototype.options.icon=t;var l=Object(S.a)(),r=Object(n.useRef)(null),c=e.seller,o=e.openPopup;return Object(n.useEffect)((function(){l.flyTo(e.mapCenter),o&&r.current.openPopup()}),[o]),a.a.createElement(_.a,{ref:r,position:[c.lat,c.lon],eventHandlers:{click:function(){e.onSellerClick(c.vk_owner_id)}}},a.a.createElement(L.a,null,a.a.createElement("table",null,a.a.createElement("tr",null,a.a.createElement("td",null,a.a.createElement(k.a,{className:"float-left popup-image",src:c.vk_group_info.photo_50,roundedCircle:!0})),a.a.createElement("td",null,a.a.createElement("span",null,c.name))))))}),w=function(e){var t=e.mapCenter,l=e.mapZoom;return a.a.createElement("div",null,a.a.createElement("p",null,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u0440\u043e\u0434\u0430\u0432\u0446\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0435:"),a.a.createElement(h.a,{center:t,zoom:l,style:{width:"400px",height:"200px"}},a.a.createElement(v.a,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),e.sellers.map((function(l,n){return a.a.createElement(O,{key:n,seller:l,mapCenter:t,openPopup:e.selectedSellerId===l.vk_owner_id,onSellerClick:e.onSellerClick})}))))},N=l(96),R=l(59),x=(l(78),l(79),function(){return a.a.createElement("div",{className:"lds-ring"},a.a.createElement("div",null),a.a.createElement("div",null),a.a.createElement("div",null),a.a.createElement("div",null))}),P=function(e){return a.a.createElement("div",null,a.a.createElement("p",null,"...\u0438\u043b\u0438 \u0438\u0437 \u0441\u043f\u0438\u0441\u043a\u0430:"),e.sellersLoaded?a.a.createElement(N.a,{variant:"flush"},e.sellers.map((function(t){return a.a.createElement(R.a,{key:t._id,onClick:function(){e.onSellerClick(t.vk_owner_id)},action:!0},a.a.createElement(k.a,{src:t.vk_group_info.photo_50,roundedCircle:!0,className:"float-left list-image"}),a.a.createElement("span",{className:t.vk_owner_id===e.selectedSellerId?"seller-active":""},t.name))}))):a.a.createElement(x,null))},Z=(l(80),function(e){return e.selectedSeller?a.a.createElement("div",{className:"description-card"},a.a.createElement("h3",null,e.selectedSeller.vk_group_info.vk_name),a.a.createElement(k.a,{width:150,height:150,className:"description-image",src:e.selectedSeller.vk_group_info.photo_200,rounded:!0}),a.a.createElement("div",null,e.selectedSeller.vk_group_info.description),a.a.createElement("br",{clear:"all"})):a.a.createElement("div",null,a.a.createElement("p",null,"\u041e\u0436\u0438\u0434\u0430\u0435\u043c \u0434\u0430\u043d\u043d\u044b\u0435 \u043f\u0440\u043e\u0434\u0430\u0432\u0446\u0430..."))}),A=l(102),U=function(e){return a.a.createElement(A.a,{style:{width:"12rem",height:"16rem"},className:"float-left"},a.a.createElement(A.a.Body,null,a.a.createElement(A.a.Img,{src:e.product.thumb_photo}),a.a.createElement(A.a.Title,null,e.product.title),a.a.createElement(A.a.Text,null,"\u0426\u0435\u043d\u0430: ",e.product.price.text)))},M=function(e){return a.a.createElement("div",null,a.a.createElement("h4",null,"\u0421\u043f\u0438\u0441\u043e\u043a \u0442\u043e\u0432\u0430\u0440\u043e\u0432"),e.productsLoaded?a.a.createElement(a.a.Fragment,null,e.products.map((function(e,t){return a.a.createElement(U,{product:e})}))):a.a.createElement(x,null))},B=function(){return a.a.createElement("div",null,"\u0414\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c \u043d\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443 \u0442\u043e\u0432\u0430\u0440\u043e\u0432 \u0420\u043e\u0434\u043e\u0432\u044b\u0445 \u043f\u043e\u043c\u0435\u0441\u0442\u0438\u0439. \u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u0440\u043e\u0434\u0430\u0432\u0446\u0430 \u0438\u0437 \u0441\u043f\u0438\u0441\u043a\u0430.")},F=function(e){return a.a.createElement(a.a.Fragment,null,a.a.createElement(p.a,{fluid:!0},a.a.createElement(E.a,null,a.a.createElement(f.a,null,a.a.createElement(w,{mapCenter:e.mapCenter,mapZoom:e.mapZoom,sellers:e.sellers,onSellerClick:e.onSellerClick,selectedSellerId:e.selectedSellerId}),a.a.createElement(P,{sellersLoaded:e.sellersLoaded,sellers:e.sellers,onSellerClick:e.onSellerClick,selectedSellerId:e.selectedSellerId})),a.a.createElement(f.a,null,e.selectedSeller?a.a.createElement("div",null,a.a.createElement(Z,{selectedSeller:e.selectedSeller}),a.a.createElement(M,{productsLoaded:e.productsLoaded,products:e.products})):a.a.createElement(B,null)))))},T=function(e){Object(u.a)(l,e);var t=Object(i.a)(l);function l(){return Object(o.a)(this,l),t.apply(this,arguments)}return Object(s.a)(l,[{key:"render",value:function(){return a.a.createElement("h1",null,"\u0421\u0441\u044b\u043b\u043a\u0438")}}]),l}(n.Component),z=function(e){Object(u.a)(l,e);var t=Object(i.a)(l);function l(){return Object(o.a)(this,l),t.apply(this,arguments)}return Object(s.a)(l,[{key:"render",value:function(){return a.a.createElement("h1",null,"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b")}}]),l}(n.Component),H=l(100),J=l(101),D=l(45),q=function(e){return a.a.createElement("header",null,a.a.createElement(H.a,{bg:"light",variant:"light"},a.a.createElement(H.a.Brand,null,"\u0422\u043e\u0432\u0430\u0440\u044b \u0420\u041f"),a.a.createElement(J.a,{className:"mr-auto"},a.a.createElement(D.LinkContainer,{to:"/"},a.a.createElement(J.a.Link,null,"\u0413\u043b\u0430\u0432\u043d\u0430\u044f")),a.a.createElement(D.LinkContainer,{to:"/links"},a.a.createElement(J.a.Link,null,"\u0421\u0441\u044b\u043b\u043a\u0438")),a.a.createElement(D.LinkContainer,{to:"/contacts"},a.a.createElement(J.a.Link,null,"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b")))))},G=(l(87),function(e){Object(u.a)(l,e);var t=Object(i.a)(l);function l(e){var n;return Object(o.a)(this,l),(n=t.call(this,e)).handleSellerClick=function(e){var t=n.state.sellers.find((function(t){return t.vk_owner_id===e})),l=[t.lat,t.lon];n.setState({products:[],productsLoaded:!1,selectedSellerId:e,selectedSeller:t,mapCenter:l}),fetch(n.SELLERS_API_URL+"/"+e).then((function(e){return e.json()})).then((function(e){n.setState({products:e.tovary.response.items,productsLoaded:!0})}))},n.SELLERS_API_URL="https://tovaryrp-from-vk.herokuapp.com/sellers",n.state={sellersLoaded:!1,sellers:[],productsLoaded:!1,products:[],selectedSellerId:"",selectedSeller:null,mapCenter:[54.1,27.9],mapZoom:5},n}return Object(s.a)(l,[{key:"componentDidMount",value:function(){var e=this;fetch(this.SELLERS_API_URL).then((function(e){return e.json()})).then((function(t){e.setState({sellersLoaded:!0,sellers:t,selectedSeller:t.find((function(t){return t.vk_owner_id===e.state.selectedSellerId}))})}))}},{key:"render",value:function(){return a.a.createElement(m.HashRouter,null,a.a.createElement(a.a.Fragment,null,a.a.createElement(q,null),a.a.createElement("main",null,a.a.createElement(d.g,null,a.a.createElement(d.c,{from:"/",to:"/main",exact:!0}),a.a.createElement(d.d,{path:"/main"},a.a.createElement(F,{sellersLoaded:this.state.sellersLoaded,sellers:this.state.sellers,selectedSeller:this.state.selectedSeller,selectedSellerId:this.state.selectedSellerId,productsLoaded:this.state.productsLoaded,products:this.state.products,mapCenter:this.state.mapCenter,mapZoom:this.state.mapZoom,onSellerClick:this.handleSellerClick})),a.a.createElement(d.d,{path:"/links",component:T}),a.a.createElement(d.d,{path:"/contacts",component:z})))))}}]),l}(n.Component));c.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(G,null)),document.getElementById("root"))}},[[64,1,2]]]);
//# sourceMappingURL=main.8ea88817.chunk.js.map